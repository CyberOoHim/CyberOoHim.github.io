---
title: (試驗版，足濟愛改) Taigi-English Quiz Game
version: v0.0a
permalink: /pages/taigi_english_quiz_game.html
---
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taigi-English Word Game</title>
    <style>
        /* CSS */
        body {
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #f8f8f8;
            /* Base font size for the entire game */
            font-size: 28px; /* Set the base font size here */
        }

        /* Container for fixed width */
        #container-wrapper {
            width: 600px; /* Set your desired fixed width here */
            max-width: 95%; /* Adjust responsive maximum width percentage */
            margin: 0 auto; /* Center the container horizontally */
        }

        #container {
            background-color: #fff;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 {
            color: #333;
            margin-bottom: 20px;
            /* Title font size (adjust as needed) */
            font-size: 1.5em;  /* 1.5 times the base font size */
        }

        #word {
            margin-bottom: 20px;
            color: #2196F3;
            /* Question font size and weight */
            font-size: 1em; /* Same as the base font size */
            font-weight: bold; /* Make question bold */
        }

        #options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
            text-align: left;
            align-items: center;
            width: 45%;
        }

        .option-container {
            display: flex;
            align-items: center;
            padding: 10px 20px;
            border-radius: 5px;
            background-color: #e0e0e0;
            transition: background-color 0.3s;
            width: 100%;
            /* Option font size (adjust as needed) */
            font-size: 0.8em; /* Slightly smaller than base font size */
        }

        .option-container:hover {
            background-color: #d0d0d0;
        }

        .option-container input[type="radio"] {
            margin-right: 10px;
        }

        #submit-button,
        #reset-button,
        #next-button {
            color: white;
            border: none;
            padding: 15px 25px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 10px;
            /* Button font size (adjust as needed) */
            font-size: 0.8em; /* Slightly smaller than base font size */
        }

        /* Submit button styles */
        #submit-button {
            background-color: #4CAF50;
            margin-right: 20px;
        }

        #submit-button:hover {
            background-color: #367c39;
        }

        /* Reset button styles */
        #reset-button {
            background-color: #f44336; /* Red color */
        }

        #reset-button:hover {
            background-color: #da190b; /* Darker red on hover */
        }

        /* Next button styles */
        #next-button {
            background-color: #2196F3; /* Blue color */
            display: none; /* Initially hidden */
        }

        #next-button:hover {
            background-color: #0d8aee; /* Darker blue on hover */
        }

        #result {
            margin-top: 20px;
            font-weight: bold;
            /* Result text font size (adjust as needed) */
            font-size: 0.9em; /* Slightly smaller than base font size */
        }

        .correct {
            color: green;
        }

        .incorrect {
            color: red;
        }

        #scoreRow {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin-bottom: 10px;
            width: 50%;
        }

        #scoreLabel,
        #incorrectScoreLabel {
            font-weight: bold;
            /* Score label font size (adjust as needed) */
            font-size: 0.9em; /* Slightly smaller than base font size */
        }

        #score,
        #incorrectScore {
            margin-left: 10px;
            /* Score display font size (adjust as needed) */
            font-size: 0.9em; /* Slightly smaller than base font size */
        }

        #incorrectScore {
            color: red;
        }

        #button-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
        }

        #bulletinRow {
            margin-bottom: 10px;
            /* Bulletin font size */
            font-size: 0.9em; /* Same as score label font size */
        }

        #bulletin {
            font-weight: bold;
        }

        /* Checkbox styles */
        #chineseCheckboxContainer {
            margin-bottom: 10px; /* Add some spacing */
            font-size: 0.8em; /* Match button font size */
            margin-top: 20px; /* Add some top margin */
        }
    </style>
</head>
<body>
    <div id="container-wrapper">
        <div id="container">
            <h1 id="gameTitle"></h1>
            <div id="scoreRow">
                <div>
                    <span id="scoreLabel"></span>
                    <span id="score">0</span>
                </div>
                <div>
                    <span id="incorrectScoreLabel"></span>
                    <span id="incorrectScore">0</span>
                </div>
            </div>
            <div id="bulletinRow">
                <div id="bulletin"></div>
            </div>
            <div id="word"></div>
            <div id="options"></div>
            <div id="button-container">
                <button id="submit-button"></button>
                <button id="reset-button"></button>
                <button id="next-button"></button>
            </div>
            <div id="result"></div>
            <div id="chineseCheckboxContainer">
                <input type="checkbox" id="chineseCheckbox" checked>
                <label for="chineseCheckbox">Show Chinese</label>
            </div>
        </div>
    </div>
    <script>
        // JavaScript (no changes needed)
        const uiText = {
            "gameTitle": "台-英 奕字",
            "scoreLabel": "着分:",
            "incorrectScoreLabel": "毋着:",
            "initialBulletin": "歡迎來奕!",
            "submitButton": "Submit Answer",
            "resetButton": "Reset Game",
            "nextButton": "Next Word",
            "correct": "Correct!",
            "incorrectPrefix": "Incorrect! ",
            "correctAnswerPrefix": "The correct answer for ",
            "selectAnswer": "Please select an answer",
            "consecutive3": "着三改! 讃 ŏ͘!",
            "consecutive5": "着五改! 媠--lah!",
            "incorrect": "Oops! Let's try another one.",
            "selectOne": "Please select one."
        };

        // Get elements (no changes)
        const wordElement = document.getElementById('word');
        const optionsElement = document.getElementById('options');
        const resultElement = document.getElementById('result');
        const scoreElement = document.getElementById('score');
        const incorrectScoreElement = document.getElementById('incorrectScore');
        const bulletinElement = document.getElementById('bulletin');
        const submitButton = document.getElementById('submit-button');
        const resetButton = document.getElementById('reset-button');
        const nextButton = document.getElementById('next-button');
        // Get the checkbox element
        const chineseCheckbox = document.getElementById('chineseCheckbox');

        // Initialize variables (no changes)
        let currentWord = '';
        let options = [];
        let score = 0;
        let incorrectScore = 0;
        let consecutiveCorrectAnswers = 0;
        let questionCounter = 0;
        let selectedOption = null;
        let retries = 3;
        let correctlyAnsweredWords = new Set();
        let wordData = [];
        let showChinese = true; // Initial state for Chinese display

        // Set initial UI text (no changes)
        document.getElementById('gameTitle').textContent = uiText.gameTitle;
        document.getElementById('scoreLabel').textContent = uiText.scoreLabel;
        document.getElementById('incorrectScoreLabel').textContent = uiText.incorrectScoreLabel;
        document.getElementById('incorrectScore').textContent = incorrectScore;
        bulletinElement.textContent = uiText.initialBulletin;
        submitButton.textContent = uiText.submitButton;
        resetButton.textContent = uiText.resetButton;
        nextButton.textContent = uiText.nextButton;

        // Function to fetch the dictionary (no changes)
        async function fetchDictionary() {
            try {
            // Set Taigi-English dictionary path
                // local
                <!-- const response = await fetch('taigi_223_of_700_en_cn_v0.1.json');-->
                // GitHub pages
                const response = await fetch('/assets/json/taigi_223_of_700_en_cn_v0.1.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                wordData = await response.json();
                displayWord();
            } catch (error) {
                console.error('Error fetching dictionary:', error);
                bulletinElement.textContent = 'Failed to load dictionary.';
            }
        }

        // Function to get a random word (no changes)
        function getRandomWord() {
            return wordData[Math.floor(Math.random() * wordData.length)];
        }

        // Function to shuffle an array (no changes)
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Function to display a word and options (modified to include Chinese)
        function displayWord() {
            resultElement.textContent = '';
            selectedOption = null;
            retries = 3;
            nextButton.style.display = 'none';
            submitButton.style.display = 'inline-block';

            do {
                currentWord = getRandomWord();
            } while (correctlyAnsweredWords.has(currentWord.POJ));

            wordElement.textContent = currentWord.POJ + " (" + currentWord.Hanji + ")";

            // Include Chinese (cn) with English (en) if checkbox is checked
            options = [showChinese ? currentWord.en + " (" + currentWord.cn + ")" : currentWord.en];
            while (options.length < 4) {
                const randomWord = getRandomWord();
                // Include Chinese (cn) for incorrect options as well if checkbox is checked
                const randomTranslation = showChinese ? randomWord.en + " (" + randomWord.cn + ")" : randomWord.en;
                if (!options.includes(randomTranslation)) {
                    options.push(randomTranslation);
                }
            }

            options = shuffle(options);

            optionsElement.innerHTML = '';
            options.forEach((option, index) => {
                const optionContainer = document.createElement('div');
                optionContainer.classList.add('option-container');

                const radio = document.createElement('input');
                radio.type = 'radio';
                radio.name = 'answer';
                radio.value = option; // Value is now en + cn (or just en)
                radio.id = 'option' + index;
                optionContainer.appendChild(radio);

                const label = document.createElement('label');
                label.textContent = option;
                label.htmlFor = 'option' + index;
                optionContainer.appendChild(label);

                optionsElement.appendChild(optionContainer);
            });
        }

        // Function to check the answer (modified to handle combined en + cn)
        function checkAnswer() {
            questionCounter++;
            selectedOption = document.querySelector('input[name="answer"]:checked');

            if (selectedOption) {
                // Extract only the English part for comparison
                const selectedEnglish = showChinese ? selectedOption.value.split(" (")[0] : selectedOption.value;

                if (selectedEnglish === currentWord.en) {
                    // Correct answer
                    if (!correctlyAnsweredWords.has(currentWord.POJ)) {
                        score++;
                        correctlyAnsweredWords.add(currentWord.POJ);
                    }
                    consecutiveCorrectAnswers++;
                    resultElement.textContent = uiText.correct;
                    resultElement.className = 'correct';

                    // Bulletin logic
                    if (consecutiveCorrectAnswers % 5 === 0) {
                        bulletinElement.textContent = uiText.consecutive5;
                    } else if (consecutiveCorrectAnswers % 3 === 0) {
                        bulletinElement.textContent = uiText.consecutive3;
                    } else {
                        bulletinElement.textContent = '';
                    }

                    // Update score display
                    scoreElement.textContent = score;
                    incorrectScoreElement.textContent = incorrectScore;

                    // Display next word after a delay
                    setTimeout(() => {
                        displayWord();
                    }, 1500);
                } else {
                    // Incorrect answer
                    retries--;
                    if (retries === 0) {
                        consecutiveCorrectAnswers = 0;
                        incorrectScore++;
                        resultElement.textContent = uiText.incorrectPrefix +
                            uiText.correctAnswerPrefix +
                            "\"" + currentWord.POJ + " (" + currentWord.Hanji + ")\" is \"" +
                            (showChinese ? currentWord.en + " (" + currentWord.cn + ")" : currentWord.en) + "\"."; // Show en and cn (or just en)
                        resultElement.className = 'incorrect';
                        bulletinElement.textContent = uiText.incorrect;

                        // Update score display
                        scoreElement.textContent = score;
                        incorrectScoreElement.textContent = incorrectScore;

                        // Show next button, hide submit button
                        nextButton.style.display = 'inline-block';
                        submitButton.style.display = 'none';
                    } else {
                        // Show hint after 2 retries, include Chinese in hint if checkbox is checked
                        if (retries == 1) {
                            resultElement.textContent = `Incorrect. Retries left: ${retries}. Hint: ${showChinese ? currentWord.en + " (" + currentWord.cn + ")" : currentWord.en}`;
                        } else {
                            resultElement.textContent = `Incorrect. Retries left: ${retries}`;
                        }
                        resultElement.className = 'incorrect';
                        bulletinElement.textContent = '';
                    }
                }
            } else {
                // No answer selected
                resultElement.textContent = uiText.selectAnswer;
                resultElement.className = 'incorrect';
                bulletinElement.textContent = uiText.selectOne;
            }
        }

        // Function to reset the game (no changes)
        function resetGame() {
            score = 0;
            incorrectScore = 0;
            consecutiveCorrectAnswers = 0;
            questionCounter = 0;
            retries = 3;
            scoreElement.textContent = score;
            incorrectScoreElement.textContent = incorrectScore;
            bulletinElement.textContent = uiText.initialBulletin;
            resultElement.textContent = '';
            correctlyAnsweredWords.clear();
            displayWord();
        }

        // Event listeners (modified to include checkbox listener)
        submitButton.addEventListener('click', checkAnswer);
        resetButton.addEventListener('click', resetGame);
        nextButton.addEventListener('click', displayWord);
        // Checkbox event listener
        chineseCheckbox.addEventListener('change', () => {
            showChinese = chineseCheckbox.checked;
            displayWord(); // Re-display the word to reflect changes
        });

        // Start the game (no changes)
        fetchDictionary();
    </script>
</body>
</html>
